# TextureChannelPacker

**TextureChannelPacker** は、3枚の独立したグレースケールテクスチャを1枚の出力テクスチャのR（赤）、G（緑）、B（青）チャンネルに効率的にパッキングするための Unreal Engine 5.7 用プラグインです。ORM（オクルージョン、ラフネス、メタリック）マップや、その他のチャンネルパッキングテクスチャを作成する際によく使用されます。

## 機能

- **チャンネルパッキング**: 3枚の入力テクスチャを受け取り、それぞれの赤（Red）チャンネルを出力テクスチャのR、G、Bチャンネルに割り当てます。
- **自動リサイズ**: 指定されたターゲット解像度に合わせて、入力テクスチャを自動的にリサイズします。リサイズ処理には高品質なバイリニア補間（`FImageUtils`）が使用されます。
- **入力処理**:
  - 各ソーステクスチャから **Redチャンネル** の値を読み取ります。
  - 入力テクスチャが指定されていない場合、対応するチャンネルは黒（0）で埋められます。
  - Alphaチャンネルは常に1.0（白）に設定されます。
- **出力設定**:
  - 出力先のパス、ファイル名、解像度をカスタマイズ可能です。
  - マスクデータ用に最適化された設定（`CompressionSettings = TC_Masks`、`sRGB = false`）で `UTexture2D` アセットを生成します。
- **ユーザーインターフェース**:
  - Unreal Engine エディタの **Tools (ツール)** メニューに統合されています。
  - ドッキング可能な **Nomadタブ** として開きます。

## 要件

- **Unreal Engine 5.5以上** (5.7で開発およびテスト済み)
- C++ プロジェクト (プラグインのコンパイルに必要)

## インストール方法

1. **クローンまたはダウンロード**:
   このリポジトリをダウンロードし、`TextureChannelPacker` フォルダをプロジェクトの `Plugins` ディレクトリに配置してください。
   - `Plugins` フォルダが存在しない場合は、プロジェクトのルートディレクトリ（`.uproject` と同じ階層）に作成してください。

   ディレクトリ構成:
   ```
   MyProject/
   ├── MyProject.uproject
   ├── Plugins/
   │   └── TextureChannelPacker/
   │       ├── TextureChannelPacker.uplugin
   │       └── Source/
   └── Source/
   ```

2. **プロジェクトファイルの生成**:
   `.uproject` ファイルを右クリックし、**Generate Visual Studio project files** を選択します。

3. **プロジェクトのビルド**:
   生成された `.sln` ファイルを IDE（Visual Studio や Rider など）で開き、プロジェクトをビルドします。これによりプラグインがコンパイルされます。

4. **プラグインの有効化**:
   Unreal Engine エディタを起動します。プラグインが自動的に有効になっていない場合は、**Edit (編集) > Plugins (プラグイン)** から **TextureChannelPacker** を検索して有効にしてください。再起動を求められた場合はエディタを再起動します。

## 使用方法

1. **ツールの起動**:
   Unreal Editor のメインメニューバーから **Tools (ツール) > Texture Packing** を選択します。Texture Channel Packer タブが開きます。このタブはエディタレイアウトの任意の場所にドッキングできます。

2. **入力の割り当て**:
   - **Red Channel Input**: 出力のRedチャンネルに格納するテクスチャを選択します（例: アンビエントオクルージョン）。
   - **Green Channel Input**: 出力のGreenチャンネルに格納するテクスチャを選択します（例: ラフネス）。
   - **Blue Channel Input**: 出力のBlueチャンネルに格納するテクスチャを選択します（例: メタリック）。

   *注意: 入力は空のままでも構いません。その場合、チャンネルは黒で埋められます。*

3. **出力設定**:
   - **Resolution**: 出力テクスチャの解像度を設定します（例: 2048）。すべての入力はこの解像度にリサイズされます。
   - **Output Path**: アセットを保存するゲームフォルダのパスを指定します（例: `/Game/Textures/Packed`）。
   - **File Name**: 新しいテクスチャアセットのファイル名を入力します。

4. **生成**:
   **Generate Texture** ボタンをクリックします。
   - ツールがテクスチャを処理し、指定された場所に新しいアセットをコンテンツブラウザ内に作成します。
   - 出力テクスチャは sRGB が無効化され、圧縮設定は Masks (リニアカラー) に設定されます。

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。詳細は [LICENSE](LICENSE) ファイルを参照してください。
